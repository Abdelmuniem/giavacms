<md-content class="padded-content-page" ng-if="permit('ACCOUNTS')">

    <div flex layout="column" layout-margin>

        <div layout="column">
            <form name="newForm">

                <md-input-container>
                    <label>Name</label>
                    <input ng-model="element.name" ng-required="true" ng-disabled="element.id == 1">
                </md-input-container>
                <md-input-container>
                    <label>Login</label>
                    <input ng-model="element.username" ng-disabled="element.id == 1">
                </md-input-container>
                <md-input-container>
                    <label ng-hide="element.id">Password</label>
                    <label ng-show="element.id">New Password (leave blank to keep current one)</label>
                    <input ng-model="element.newPassword" ng-required="!element.id">
                </md-input-container>
                <md-input-container ng-if="true">
                    <label>Current Roles</label>
                    <input ng-model="element.roles">
                </md-input-container>
            </form>

            <br/>

            <div layout="row">
                <h3>Toggle Roles</h3>
                <div flex></div>
                <md-button class="my-fab md-fab md-primary" aria-label="fab button" ng-click="all()"
                           title="all">
                    <md-icon md-font-icon="fa fa-check-square-o"></md-icon>
                </md-button>
                <md-button class="my-fab md-fab md-primary" aria-label="fab button" ng-click="none()"
                           title="none">
                    <md-icon md-font-icon="fa fa-square-o"></md-icon>
                </md-button>
            </div>
            <md-content ng-repeat="(roleName,roleGiven) in roleMap">
                <md-input-container>
                    <label>{{roleName}}</label>
                </md-input-container>
                <input type="checkbox" ng-model="roleMap[roleName]" ng-change="toggle(roleName)"/>
            </md-content>

            <div layout="row" layout-align="end end">
                <md-button class="md-raised" ng-class="[buttonClass, buttonHue]" ng-if="!element.id"
                           aria-label="raised button" ng-disabled="newForm.$invalid"
                           ng-click="save()" ng-submit="save()">SAVE
                </md-button>
                <md-button class="md-raised" ng-class="[buttonClass, buttonHue]" ng-if="element.id"
                           aria-label="raised button" ng-disabled="newForm.$invalid"
                           ng-click="update()" ng-submit="update()">UPDATE
                </md-button>
                <md-button class="md-raised" ng-class="[buttonClass, buttonHue]"
                           aria-label="raised button"
                           ng-click="back()">CANCEL
                </md-button>
                <div flex="5"/>
                <md-button class="md-raised" ng-class="[buttonClass, buttonHue]"
                           aria-label="raised button" ng-disabled="element.id == 1"
                           ng-click="back()">SEND NEW CREDENTIALS
                </md-button>
                <div flex="5"/>
                <md-button class="md-raised" ng-class="[buttonClass, buttonHue]"
                           aria-label="raised button" ng-disabled="element.id == 1"
                           ng-click="delete()" ng-if="element.id">DELETE
                </md-button>
            </div>

        </div>


</md-content>
