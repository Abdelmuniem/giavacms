<md-content class="padded-content-page" ng-if="permit('CATALOGUE')">

    <div flex layout="column" layout-margin>

        <div layout="column">

            <form name="newForm">

                <div layout="row">
                    <md-input-container>
                        <label>Name</label>
                        <input ng-model="element.name" ng-required="true">
                    </md-input-container>
                    <div flex></div>
                    <md-button class="my-fab md-fab md-primary" aria-label="fab button"
                               ng-click="editImages()" ng-if="element.id">
                        <md-icon md-font-icon="fa fa-picture-o"></md-icon>
                    </md-button>
                    <md-button class="my-fab md-fab md-primary" aria-label="fab button"
                               ng-click="editDocuments()" ng-if="element.id">
                        <md-icon md-font-icon="fa fa-file"></md-icon>
                    </md-button>
                </div>

                <md-content>
                    <md-select placeholder="Category ..." ng-model="element.category"
                               ng-required="true" ng-selected="element.category">
                        <md-option ng-value="c" ng-repeat="c in categories">{{c.name}}
                        </md-option>
                    </md-select>
                </md-content>
                <md-content>
                    <md-select placeholder="Language ..." ng-model="element.language"
                               ng-required="true" ng-selected="element.language">
                        <md-option ng-value="l" ng-repeat="l in languages">{{l}}
                        </md-option>
                    </md-select>
                </md-content>
                <md-input-container>
                    <label>Preview</label>
                    <textarea ng-model="element.preview" class="my-textarea"/>
                </md-input-container>
                <md-input-container>
                    <label>Description</label>
                    <textarea ng-model="element.description" class="my-textarea"/>
                </md-input-container>
                <md-input-container>
                    <label>Dimensions</label>
                    <input ng-model="element.dimensions" ng-required="false">
                </md-input-container>
                <md-input-container>
                    <label>Code</label>
                    <input ng-model="element.code" ng-required="false">
                </md-input-container>
                <md-input-container>
                    <label>Price</label>
                    <input ng-model="element.price" ng-required="false">
                </md-input-container>
                <md-input-container>
                    <label>VAT</label>
                    <input ng-model="element.vat" ng-required="false">
                </md-input-container>
                <md-input-container>
                    <label>Tags (comma separated)</label>
                    <input ng-model="element.tags" ng-required="false">
                </md-input-container>
                <md-content>
                    <br/>
                </md-content>
                <div ng-repeat="i in [1,2,3,4,5,6,7,8,9,10]">
                    {{element.category['prop'+i]}}
                    {{element.category['ref'+i]}}
                    <span ng-repeat="l in element.category['ref'+i].split(',')">{{l}}</span>

                </div>
                <md-content ng-repeat="i in [1,2,3,4,5,6,7,8,9,10]" ng-show="element.category['prop'+i]">
                    <md-input-container ng-hide="element.category['ref'+i]">
                        <label>{{element.category['prop'+i]}}</label>
                        <input ng-model="element['val'+i]" ng-required="false"
                                >
                    </md-input-container>
                    <md-select placeholder="{{element.category['prop'+i]}}" ng-model="element['val'+i]" ng-show="element.category['ref'+i]"
                               ng-required="false" ng-selected="element['val'+i]">
                        <md-option ng-value="l" ng-repeat="l in element.category['ref'+i].split(',')">{{l}}
                        </md-option>
                    </md-select>
                </md-content>
            </form>

        </div>

        <div layout="row" layout-align="end end">
            <md-button class="md-raised" ng-class="[buttonClass, buttonHue]"
                       aria-label="raised button" ng-disabled="newForm.$invalid"
                       ng-click="save()" ng-submit="save()" ng-if="!element.id">SAVE
            </md-button>
            <md-button class="md-raised" ng-class="[buttonClass, buttonHue]"
                       aria-label="raised button" ng-disabled="newForm.$invalid"
                       ng-click="update()" ng-submit="update()" ng-if="element.id">UPDATE
            </md-button>
            <md-button class="md-raised" ng-class="[buttonClass, buttonHue]"
                       aria-label="raised button"
                       ng-click="back()">CANCEL
            </md-button>
            <div flex="5"/>
            <md-button class="md-raised" ng-class="[buttonClass, buttonHue]"
                       aria-label="raised button" ng-disabled="newForm.$invalid"
                       ng-click="delete()" ng-if="element.id">DELETE
            </md-button>
        </div>

    </div>


</md-content>
